<h1>My Details</h1>

<div class="patient-details">
    <!-- patient details from FHIR -->
    <div data-ng-show="!loading && patientDetails.length">
        <div class="details-filter clearfix">
            <div class="pull-right">Information provided by: &nbsp;&nbsp;
                <label data-ng-repeat="patient in patientDetails">
                    <input type="checkbox" value="{{patient.group.name}}" data-ng-model="patient.group.selected">
                    <span class="checkbox-label">{{patient.group.name}}</span>
                </label>
            </div>
        </div>
        <div data-ng-repeat="patient in patientDetails" data-ng-show="patient.group.selected" class="details-container">

                <div class="panel panel-default">
                    <div class="panel-heading"><h3>{{patient.group.name}}</h3></div>
                    <div class="panel-body">
                        <table class="table table-bordered">
                            <tbody>
                                <tr><td colspan="2"><h4>Patient Details</h4></td></tr>
                                <tr>
                                    <td class="forced-width">Surname</td>
                                    <td>{{patient.fhirPatient.surname}}</td>
                                </tr>
                                <tr>
                                    <td class="forced-width">Forename(s)</td>
                                    <td>{{patient.fhirPatient.forename}}</td>
                                </tr>
                                <tr>
                                    <td class="forced-width">Sex</td>
                                    <td>{{patient.fhirPatient.gender}}</td>
                                </tr>
                                <tr>
                                    <td class="forced-width">Date of Birth</td>
                                    <td>{{patient.fhirPatient.dateOfBirth | date:'dd-MMM-yyyy'}}</td>
                                </tr>
                                <tr>
                                    <td class="forced-width">NHS Number</td>
                                    <td>
                                        <span data-ng-repeat="identifier in patient.fhirPatient.identifiers" data-ng-show="identifier.label === 'NHS_NUMBER'">
                                            {{identifier.value}}
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="forced-width">Hospital Number</td>
                                    <td>
                                        <span data-ng-repeat="identifier in patient.fhirPatient.identifiers" data-ng-show="identifier.label === 'HOSPITAL_NUMBER'">
                                            {{identifier.value}}
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="forced-width">Address</td>
                                    <td>
                                        {{patient.fhirPatient.address1}},
                                        {{patient.fhirPatient.address2}},
                                        {{patient.fhirPatient.address3}},
                                        {{patient.fhirPatient.address4}},
                                        {{patient.fhirPatient.postcode}}
                                    </td>
                                </tr>
                                <tr>
                                    <td class="forced-width">Phone Number(s)</td>
                                    <td>
                                        <span data-ng-repeat="phoneNumber in patient.fhirPatient.phoneNumbers">
                                            {{phoneNumber}}<br/>
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <table data-ng-show="patient.fhirPractitioner" class="table table-bordered">
                            <tbody>
                                <tr><td colspan="2"><h4>GP Details</h4></td></tr>
                                <tr>
                                    <td class="forced-width">Name</td>
                                    <td>{{patient.fhirPractitioner.name}}</td>
                                </tr>
                                <tr>
                                    <td>Address</td>
                                    <td>
                                        {{patient.fhirPractitioner.address1}},
                                        {{patient.fhirPractitioner.address2}},
                                        {{patient.fhirPractitioner.address3}},
                                        {{patient.fhirPractitioner.address4}},
                                        {{patient.fhirPractitioner.postcode}}
                                    </td>
                                </tr>
                                <tr>
                                    <td class="forced-width">Phone Number (s)</td>
                                    <td>
                                        <span data-ng-repeat="phoneNumber in patient.fhirPractitioner.phoneNumbers">
                                            {{phoneNumber}}<br/>
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

        </div>
        <div class="details-container">
            <div class="panel panel-default">
                <!-- More About Me -->
                <div class="panel-heading"><h3>More About Me</h3></div>
                <div data-ng-show="!loading">
                    <div class="panel-body">
                        <div class="row">
                            <div class="form-horizontal" role="form">
                                <div class="col-md-12">
                                    <label for="should-know-input" class="control-label">Things people should know about me</label>
                                    <div>
                                        <textarea id="should-know-input" data-ng-model="moreAboutMe.shouldKnow" class="form-control"
                                                  placeholder="E.g. my interests and relevant personal details" ></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-horizontal" role="form">
                                <div class="col-md-12">
                                    <label for="talk-about-input" class="control-label">Things I'd like to talk about</label>
                                    <div>
                                        <textarea id="talk-about-input" data-ng-model="moreAboutMe.talkAbout" class="form-control"
                                                  placeholder="E.g. how my treatment is progressing or possible questions about new treatment options"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br/>
                        <button class="btn blue" data-ng-click="saveMoreAboutMe(moreAboutMe)">Save</button>
                        <span>{{moreAboutMeMessage}}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div data-ng-show="!loading && !patientDetails.length">
        <p>Your patient details are not currently stored in PatientView.</p>
    </div>



    <div data-ng-show="loading" class="container"><br/>
        <div data-ng-show="loading" class="loading"><img src="images/loading.gif" alt="Loading"/></div><br/>
    </div>
</div>


