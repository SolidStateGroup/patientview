<div>
    <select class="form-control" id="conversation-contact-option" ng-model="contactOption" ng-options="contactOption.id as contactOption.description for contactOption in contactOptions"></select>
</div>
<div>
    <div class="row">
        <div class="form-horizontal" role="form">
            <div class="col-md-12">
                <label for="conversation-add-recipient" class="control-label">Recipients <span class="error" ng-show="conversation.recipients.length < 1 && !contactUnitForm.$pristine"> *required</span></label>
                <ul class="feature-list unstyled">
                    <li class="feature-list-item" ng-repeat="user in conversation.recipients">
                        <div class="feature-list-name"><span class="feature-list-name">{{user.forename}} {{user.surname}}</span> &nbsp;
                            <a id="remove-recipient-{{user.id}}" href="" ng-click="removeRecipient(contactUnitForm, conversation, user)" ><i class="glyphicon glyphicon-remove"></i></a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="form-horizontal" role="form" ng-show="!modalLoading">
            <div class="custom-select col-md-3" ng-show="!conversation.allRecipients.length" ng-cloak>
                <p>No message recipients available, cannot send a new message</p>
            </div>
            <div ng-show="conversation.allRecipients.length">
                <div class="custom-select col-md-3" ng-show="conversation.availableRecipients.length" >
                    <select class="form-control recipient-select" id="conversation-add-recipient" ng-model="recipientToAdd" ng-options="user.id as user.forename + ' ' + user.surname for user in conversation.availableRecipients | orderBy:'forename'"></select>
                </div>
                <button type="button" class="btn blue recipient-add-button pull-left" ng-click="addRecipient(contactUnitForm, conversation, recipientToAdd)" ng-show="conversation.availableRecipients.length">
                    <i class="glyphicon glyphicon-plus-sign"></i> &nbsp;&nbsp;Add Recipient</button>
            </div>
        </div>
        <div class="loading" ng-show="modalLoading"><img src="images/loading.gif" alt="Loading"/></div>
    </div>
    <div class="row">
        <div class="form-horizontal" role="form">
            <div class="col-md-12">
                <label for="conversation-title" class="control-label">Title <span class="error" ng-show="contactUnitForm.title.$error.required && !contactUnitForm.$pristine"> *required</span></label>
                <div class=""><input type="text" class="form-control" id="conversation-title" placeholder="Title" name="title" ng-model="conversation.title" required></div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-horizontal" role="form">
            <div class="col-md-12">
                <label for="conversation-message" class="control-label">Message <span class="error" ng-show="contactUnitForm.message.$error.required && !contactUnitForm.$pristine"> *required</span></label>
                <div class=""><textarea class="form-control" id="conversation-message" placeholder="Messasge" name="message" ng-model="conversation.message" required /></div>
            </div>
        </div>
    </div>
    <div ng-include src="'views/partials/htmlHelp.html'" class="help-text"></div>
</div>