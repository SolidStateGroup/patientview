

<!--<div data-ng-show="!modalLoading && newConversation.allRecipients.length">-->
<div data-ng-show="!modalLoading" xmlns="http://www.w3.org/1999/html">

    <div class="row" data-ng-show="newConversation.recipients.length">
        <div class="form-horizontal" role="form">
            <div class="col-md-12">
                <label for="conversation-add-recipient" class="control-label">Recipients </label>
                <ul class="feature-list unstyled">
                    <li class="feature-list-item" data-ng-repeat="user in newConversation.recipients">
                        <div class="feature-list-name"><span class="feature-list-name">{{user.forename}} {{user.surname}}</span> &nbsp;
                            <a id="remove-recipient-{{user.id}}" href="" data-ng-click="removeRecipient(conversationFormNew, newConversation, user)" ><i class="glyphicon glyphicon-remove"></i></a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <h4>Select Group and Recipient, then add to this conversation by clicking "Add Recipient"</h4>
            <div class="error" data-ng-show="newConversation.recipients.length < 1">There must be at least one recipient</div>
            <br/>
        </div>
    </div>


    <div>
        <div class="row">
            <div class="col-md-5">
                <label for="conversation-select-group">Group</label>
                <select class="form-control recipient-select" id="conversation-select-group"
                        data-ng-model="selectedGroupId"
                        data-ng-options="group.id as group.name + ' &nbsp;(' + group.groupType.description + ')' for group in conversationGroups | orderBy:[orderGroups,'name']"
                        data-ng-change="selectGroup(newConversation, selectedGroupId)">
                </select>
            </div>
            <div class="col-md-5" data-ng-show="newConversation.availableRecipients.length" >
                <label for="conversation-add-recipient">Recipient</label>
                <select class="form-control recipient-select" id="conversation-add-recipient"
                        data-ng-model="recipientToAdd"
                        data-ng-options="user.id as user.forename + ' ' + user.surname for user in newConversation.availableRecipients | orderBy:'forename'"></select>
            </div>
            <div class="col-md-2">
                <label for="add-recipient-button"></label>
                <button type="button" class="btn blue recipient-add-button pull-left" id="add-recipient-button"
                        data-ng-click="addRecipient(conversationFormNew, newConversation, recipientToAdd)"
                        data-ng-disabled="!newConversation.availableRecipients.length">
                    <i class="glyphicon glyphicon-plus-sign"></i> &nbsp;&nbsp;Add Recipient</button>
            </div>
        </div>
        <hr/>
        <div class="row">
                <div class="col-md-12">
                    <label for="conversation-title" class="control-label">Title
                        <span class="error" data-ng-show="conversationFormNew.title.$error.required && !conversationFormNew.$pristine"> *required</span>
                    </label>
                    <div class=""><input type="text" class="form-control" id="conversation-title" placeholder="Title"
                                         name="title" data-ng-model="newConversation.title"
                                         data-ng-disabled="!newConversation.availableRecipients.length" required></div>
                </div>
        </div>
        <div class="row">
            <div class="form-horizontal" role="form">
                <div class="col-md-12">
                    <label for="conversation-message" class="control-label">Message
                        <span class="error" data-ng-show="conversationFormNew.message.$error.required && !conversationFormNew.$pristine"> *required</span>
                    </label>
                    <textarea class="form-control article-content" id="conversation-message" placeholder="Message"
                              name="message" data-ng-model="newConversation.message"
                              data-ng-disabled="!newConversation.availableRecipients.length" required></textarea>
                </div>
            </div>
        </div>
        <div data-ng-include src="'views/partials/htmlHelp.html'" class="help-text"></div>
    </div>

    <div data-ng-show="!newConversation.allRecipients.length && selectedGroupId">
        <br/>
        <h4>There are no recipients available for this group</h4>
    </div>
</div>

<div data-ng-show="modalLoading" class="row"><br/>
    <div class="col-md-12">
        <h3><img src="images/loading.gif" alt="Loading"/>&nbsp; Loading Recipients</h3>
    </div>
</div>