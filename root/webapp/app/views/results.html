<h1>Results</h1>

<div class="results-header content-panel" ng-show="!loading">
    <div class="header-icon pull-left">
        <i class="icon-results-large pull-left"></i>
    </div>
    <div class="content-inner clearfix">
        <form id="search-patient-results">
            <div class="form-row pull-right">
                <label>Select Specialty: </label>
                <select class="form-control" ng-model="selectedGroup"
                        ng-options="group.id as group.name for group in groups"
                        ng-change="changeGroup(selectedGroup)">
                </select>
            </div>
            <fieldset>
                <label class="large">Showing Panel: <span class="">{{currentPage}}</span></label>
                <ul class="unstyled inline">
                    <li ng-repeat="result in panel | orderBy:'panelOrder'">
                        {{result.heading}} &nbsp;
                    </li>
                </ul>
            </fieldset>
        </form>
    </div>
</div>

<ul class="pagination results pull-right" ng-show="!loading">
    <li ng-repeat="(key, panel) in panels" ng-class="{active: currentPage == key}" ng-click="changePanel(key)">
        <a href="" data-toggle="tooltip" data-placement="top" title="{{getPanelResultTitles(panel)}}">{{key}}</a>
    </li>
</ul>

<div class="results-container clearfix" ng-show="!loading">
    <ul class="unstyled results-list row">
        <li class="col-md-3 col-xs-12 result-item-container" ng-repeat="result in panel | orderBy:'panelOrder'">
            <div class="content-panel result-item">
                <div class="result-header">
                    <h4>
                        <a href="" ng-click="openObservationHeadingInformation(result)">
                        <i class="icon-result-info pull-right"></i>
                        </a> {{result.heading}}
                    </h4>
                </div>
                <div class="result-value" ng-show="result.latestObservation">
                    <dl class="result-change">
                        <dt>
                            {{result.latestObservation.value}} <span ng-show="result.units">{{result.units}}</span>
                        </dt>
                        <dd ng-show="getResultIcon(result)">
                            <i class="{{getResultIcon(result)}} pull-left"></i>
                            <span class="pull-left">{{removeMinus(result.valueChange)}}</span>
                        </dd>
                    </dl>
                </div>
                <div class="result-value" ng-show="!result.latestObservation">
                    <h5>Not Available</h5>
                </div>
                <ul class="unstyled info-list pull-left" ng-show="result.latestObservation">
                    <li>
                        <span class="pull-right" ng-show="result.latestObservation.group">{{result.latestObservation.group.name}}</span>
                        <span class="pull-right" ng-show="!result.latestObservation.group">Unknown</span>
                        <strong>Source:</strong>
                    </li>
                    <li><span class="pull-right">{{result.latestObservation.applies | date:'dd-MMM-yyyy'}}</span><strong>Showing Result:</strong> </li>
                </ul>
                <div class="result-footer">
                    <a href="/#/resultsdetail?code={{result.code}}"><i class="icon-circle-arrow pull-right"></i>
                        View More Details
                    </a>
                </div>
            </div>
        </li>
    </ul>
</div>

<div ng-show="loading" class="container"><br/><br/>
    <div ng-show="loading" class="loading"><img src="images/loading.gif" alt="Loading"/></div>
</div>