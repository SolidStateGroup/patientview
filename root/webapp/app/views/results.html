<div data-ng-show="!loading">
    <h1 class="clearfix">
        <ul class="unstyled inline pull-right">
        <li><a href="/#/diagnostics" class="btn blue pull-right">Diagnostics</a></li>
        <li><a href="/#/resultsenter" class="btn blue pull-right">Enter Your Own Results</a></li>
    </ul>
    <span>Results</span>

    </h1>

    <div class="results-header content-panel">
        <div class="header-icon pull-left">
            <i class="icon-results-large pull-left"></i>
        </div>
        <div class="content-inner clearfix">
            <form id="search-patient-results">
                <div class="form-row pull-right">
                    <label for="specialty-select">Select Specialty: </label>
                    <select class="form-control" data-ng-model="selectedGroup"
                            data-ng-options="group.id as group.name for group in groups"
                            data-ng-change="changeGroup(selectedGroup)" id="specialty-select">
                    </select>
                </div>
                <fieldset>
                    <label class="large">Showing Panel: <span class="">{{currentPage}}</span></label>
                    <ul class="unstyled inline">
                        <li data-ng-repeat="result in panel | orderBy:'panelOrder'">
                            {{result.heading}} &nbsp;
                        </li>
                    </ul>
                </fieldset>
            </form>
        </div>
    </div>

    <!--<ul class="pagination results">
        <li data-ng-repeat="(key, panel) in panels" data-ng-class="{active: currentPage == key}" data-ng-click="changePanel(key)">
            <a href="" data-toggle="tooltip" data-placement="top" title="{{getPanelResultTitles(panel)}}">{{key}}</a>
        </li>
    </ul>-->

    <div class="results-container clearfix">
        <ul class="unstyled results-list row">
            <li bindonce class="col-md-3 col-xs-12 result-item-container" data-ng-repeat="result in panel | orderBy:'panelOrder'">
                <div class="content-panel result-item">
                    <div class="result-header">
                        <h4>
                            <a href="" data-ng-click="openObservationHeadingInformation(result)">
                                <span class="info-link pull-right">About</span>
                            </a>
                            {{result.heading}}
                        </h4>
                    </div>

                    <!--TODO - Make sure the styles are not broken when we have results in dev DB-->
                    <a href="/#/resultsdetail?code={{result.code}}">
                        <div class="result-value" data-ng-show="result.latestObservation">
                            <dl class="result-change">
                                <dt>
                                    <span data-ng-show="!result.latestObservation.value">Result value not available</span>
                                    {{result.latestObservation.comparator}}{{result.latestObservation.value}}
                                    <span data-ng-show="result.units && result.latestObservation.value">{{result.units}}</span>
                                </dt>
                            </dl>
                        </div>
                        <div class="result-value" data-ng-show="!result.latestObservation">
                            <h5>Not Available</h5>
                        </div>
                    </a>
                    <ul class="unstyled info-list pull-left" data-ng-show="result.latestObservation">
                        <li>
                            <span class="pull-right" data-ng-show="result.latestObservation.group">{{result.latestObservation.group.name}}</span>
                            <span class="pull-right" data-ng-show="!result.latestObservation.group">Unknown</span>
                            <strong>Source:</strong>
                        </li>
                        <li><span class="pull-right">{{result.latestObservation.applies | date:'dd-MMM-yyyy'}}</span><strong>Showing Result:</strong> </li>
                    </ul>
                    <div class="result-footer">
                        <a href="/#/resultsdetail?code={{result.code}}"><i class="icon-circle-arrow pull-right"></i>
                            View More Details
                        </a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
</div>
<div data-ng-show="loading" class="container"><br/><br/>
    <div data-ng-show="loading" class="loading">
        <h3><img src="images/loading.gif" alt="Loading"/>&nbsp; Loading Your Results</h3>
    </div>
</div>